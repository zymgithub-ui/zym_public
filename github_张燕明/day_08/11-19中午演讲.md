# 							中午演讲11-19

## 请介绍移动端体检预约的业务逻辑

```
请介绍移动端体检预约的业务逻辑
体检预约流程:
用户可以通过如下操作流程进行体检预约：
1、在移动端首页点击体检预约，页面跳转到套餐列表页面  

	异步请求,将所有套餐展示出来(并且给每个套餐加id)

2、在套餐列表页面点击要预约的套餐，页面跳转到套餐详情页面  
	页面跳转时将套餐id取出,异步请求传给后台
	进行多表联查
	套餐 --<多对多>--检查组--<多对多>--检查项 
    用到resultMap 属性不是简单数据类型和javaBean用 collention 封装指定property和oftype,以及		select="" 
3、在套餐详情页面点击立即预约，页面跳转到预约页面	
	先是一个回显(根据套餐id,)
	点击立即预约->跳转
	录入体检人信息:
	包括手机号，身份证,
	以及选择的日期
        日历展示：
        使用BootStrap框架提供的DatePicker组件来展示日历，根据需求，只展示未来一个月的日期。
	
	点击发送验证码	阿里大鱼短信服务
	后台代码：
    1）使用ValidateCodeUtiles工具类中的生成验证码的方法，生成4位验证码；
    2)使用SMSUtils工具类的发送验证码的方法，发送验证码；
    验证码发送成功，将验证码保存到redis缓存中，并设置失效时间：
	
4、在预约页面录入收到的手机短信验证码，点击提交预约，完成体检预约

		1、检查用户所选择的预约日期是否已经提前进行了预约设置，如果没有设置	则无法进行预约
        2、检查用户所选择的预约日期是否已经约满，如果已经约满则无法预约
        3、检查当前用户是否为会员，如果是会员则直接完成预约，如果不是会员则	自动完成注册并进行预约
        4、检查用户是否重复预约（同一个用户在同一天预约了同一个套餐），如果	是重复预约则无法完成再次预约
        5、预约成功，更新当日的已预约人数
        6.给前台返回用户id
        
5.预约成功之后
		跳转预约成功界面,需要带着用户id过去,
		成功界面拿着id进行异步请求
		获取到该用户预约信息进行回显
		    比如:预约用户:
				预约套餐:
				体检时间:
		
```

## 请介绍Spring AOP

```
    spring aop是什么
    AOP 为 Aspect Oriented Programming 的缩写，意思为面向切面编程，是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。
    
    spring aop底层采用什么实现，有几种方式
    实际上，AOP 的底层是通过 Spring 提供的的动态代理技术实现的。在运行期间，Spring通过动态代理技术动态的生成代理对象，代理对象方法执行时进行增强功能的介入，在去调用目标对象的方法，从而完成功能的增强。
    常用的动态代理技术
	JDK 代理 : 基于接口的动态代理技术
	cglib 代理：基于父类的动态代理技术
	aop在项目中的应用
	事务
	日志的收集,前置通知,后置通知,环绕通知,异常通知
	
```

## 请介绍Spring MVC拦截器如何使用

```xml
Spring MVC 的拦截器类似于 Servlet 开发中的过滤器 Filter，用于对处理器进行预处理和后处理,
SpringMVC是SpringMVC框架自己的,只有用了SpringMVC框架的工程才能使用。

拦截器也是AOP思想的具体实现

SpringMVC底层加载流程:?????????????????

具体使用:
	1.自定义拦截器类 实现 HandlerInterceptor 重写方法
	preHandler  //目标方法执行前
	postHandler  //目标方法执行后视图对象返回前
	afterHandler //在流程全部执行完毕之后
	2.在SpringMVC.xml的配置文件中
	<!--配置拦截器-->
    <mvc:interceptors>
        <mvc:interceptor>
            <!--对哪些资源执行拦截操作-->
            <mvc:mapping path="/**"/>
            <bean class="com.itheima.interceptor.MyInterceptor1"/>
        </mvc:interceptor>
        <mvc:interceptor>
            <!--对哪些资源执行拦截操作-->
            <mvc:mapping path="/**"/>
            <bean class="com.itheima.interceptor.MyInterceptor2"/>
        </mvc:interceptor>
    </mvc:interceptors>
	多个拦截器情况下，配置在前的先执行，配置在后的后执行
	拦截器中的方法执行顺序是：preHandler-------目标资源----postHandle---- afterCompletion
	
-----------------------------------------------------------------------------------------
SpringMVC拦截器interceptor 和 filter 区别 
	使用范围:
		过滤器:是servlet规范中的一部分,任何java Web工程都可以使用
		拦截器:是SpringMVC框架自己的,只有用了SpringMVC框架的工程才能使用
	拦截范围:
		过滤器:在url-pattern 中配置了/*之后,可以对所有要访问的资源拦截
		拦截器:只会拦截访问的控制器方法,如果访问的是jsp,html,css,image,js是不会进行拦截的
	

```























































